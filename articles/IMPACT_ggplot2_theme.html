<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>IMPACT ggplot2 theme • presentresults</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.3.1/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.3.1/bootstrap.bundle.min.js"></script><link href="../deps/font-awesome-6.4.2/css/all.min.css" rel="stylesheet">
<link href="../deps/font-awesome-6.4.2/css/v4-shims.min.css" rel="stylesheet">
<script src="../deps/headroom-0.11.0/headroom.min.js"></script><script src="../deps/headroom-0.11.0/jQuery.headroom.min.js"></script><script src="../deps/bootstrap-toc-1.0.1/bootstrap-toc.min.js"></script><script src="../deps/clipboard.js-2.0.11/clipboard.min.js"></script><script src="../deps/search-1.0.0/autocomplete.jquery.min.js"></script><script src="../deps/search-1.0.0/fuse.min.js"></script><script src="../deps/search-1.0.0/mark.min.js"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="IMPACT ggplot2 theme">
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>


    <nav class="navbar navbar-expand-lg fixed-top bg-light" data-bs-theme="light" aria-label="Site navigation"><div class="container">

    <a class="navbar-brand me-2" href="../index.html">presentresults</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9002</small>


    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="nav-item"><a class="nav-link" href="../reference/index.html">Reference</a></li>
<li class="active nav-item dropdown">
  <button class="nav-link dropdown-toggle" type="button" id="dropdown-articles" data-bs-toggle="dropdown" aria-expanded="false" aria-haspopup="true">Articles</button>
  <ul class="dropdown-menu" aria-labelledby="dropdown-articles">
<li><a class="dropdown-item" href="../articles/add-label-to-results-table.html">Add labels to results table</a></li>
    <li><a class="dropdown-item" href="../articles/create-table-for-map.html">Create table for map</a></li>
    <li><a class="dropdown-item" href="../articles/IMPACT_ggplot2_theme.html">IMPACT ggplot2 theme</a></li>
  </ul>
</li>
      </ul>
<ul class="navbar-nav">
<li class="nav-item"><form class="form-inline" role="search">
 <input class="form-control" type="search" name="search-input" id="search-input" autocomplete="off" aria-label="Search site" placeholder="Search for" data-search-index="../search.json">
</form></li>
      </ul>
</div>


  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">

      <h1>IMPACT ggplot2 theme</h1>
            
      

      <div class="d-none name"><code>IMPACT_ggplot2_theme.Rmd</code></div>
    </div>

    
    
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://impact-initiatives.github.io/presentresults/">presentresults</a></span><span class="op">)</span></span>
<span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://ggplot2.tidyverse.org" class="external-link">ggplot2</a></span><span class="op">)</span></span></code></pre></div>
<p>This vignette is to help show how the ggplot2 themes can be used. The
aim of the themes is to help giving an “IMPACT” touch to the graphs, not
to create them. The graph should already be created, i.e. type of plots,
and the correct aesthetics.</p>
<p>The following example aims to plot the percentages of households by
category of water sources, by gender of the head of households <em>(This
a dummy dataset)</em>.</p>
<div class="section level2">
<h2 id="barplot-without-formating">Barplot without formating<a class="anchor" aria-label="anchor" href="#barplot-without-formating"></a>
</h2>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_to_plot</span> <span class="op">&lt;-</span> <span class="fu">presentresults</span><span class="fu">::</span><span class="va"><a href="../reference/presentresults_MSNA2024_labelled_results_table.html">presentresults_MSNA2024_labelled_results_table</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">analysis_var</span> <span class="op">==</span> <span class="st">"wash_drinking_water_source_cat"</span>,</span>
<span>    <span class="va">group_var</span> <span class="op">==</span> <span class="st">"hoh_gender"</span>, </span>
<span>    <span class="va">group_var_value</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"male"</span>, <span class="st">"female"</span><span class="op">)</span></span>
<span>  <span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate.html" class="external-link">mutate</a></span><span class="op">(</span>label_analysis_var_value <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/factor.html" class="external-link">factor</a></span><span class="op">(</span><span class="va">label_analysis_var_value</span>,</span>
<span>                                                  levels <span class="op">=</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"Improved"</span>,</span>
<span>                                                             <span class="st">"Unimproved"</span>,</span>
<span>                                                             <span class="st">"Surface water"</span>,</span>
<span>                                                             <span class="st">"Undefined"</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span>
<span></span>
<span><span class="va">initialplot</span> <span class="op">&lt;-</span> <span class="va">data_to_plot</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">label_analysis_var_value</span>,</span>
<span>      y <span class="op">=</span> <span class="va">stat</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">label_group_var_value</span></span>
<span>    <span class="op">)</span>,</span>
<span>    position <span class="op">=</span> <span class="st">"dodge"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data_to_plot</span><span class="op">$</span><span class="va">indicator</span><span class="op">)</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>    x <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data_to_plot</span><span class="op">$</span><span class="va">label_analysis_var</span><span class="op">)</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data_to_plot</span><span class="op">$</span><span class="va">label_group_var</span><span class="op">)</span>, <span class="fl">20</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span></code></pre></div>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">initialplot</span></span></code></pre></div>
<div class="figure">
<img src="IMPACT_ggplot2_theme_files/figure-html/unnamed-chunk-3-1.png" alt="Initial plot without theme." width="768"><p class="caption">
Initial plot without theme.
</p>
</div>
</div>
<div class="section level2">
<h2 id="theme_barplot">
<code>theme_barplot</code><a class="anchor" aria-label="anchor" href="#theme_barplot"></a>
</h2>
<p><code>theme_barplot</code> will give REACH color palette to the bar
plot, put the y-axis to 0 to 100%.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">initialplot</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/theme_barplot.html">theme_barplot</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="IMPACT_ggplot2_theme_files/figure-html/unnamed-chunk-4-1.png" alt="Initial plot without `theme_barplot`" width="768"><p class="caption">
Initial plot without <code>theme_barplot</code>
</p>
</div>
</div>
<div class="section level2">
<h2 id="theme_impact">
<code>theme_impact</code><a class="anchor" aria-label="anchor" href="#theme_impact"></a>
</h2>
<p><code>theme_impact</code> will change the background and color of the
title.</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">initialplot</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/theme_barplot.html">theme_barplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_impact.html">theme_impact</a></span><span class="op">(</span><span class="st">"reach"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="IMPACT_ggplot2_theme_files/figure-html/unnamed-chunk-5-1.png" alt="Initial plot without `theme_barplot` and `theme_impact`" width="768"><p class="caption">
Initial plot without <code>theme_barplot</code> and
<code>theme_impact</code>
</p>
</div>
</div>
<div class="section level2">
<h2 id="other-palettes">Other palettes<a class="anchor" aria-label="anchor" href="#other-palettes"></a>
</h2>
<div class="sourceCode" id="cb6"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">initialplot</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/theme_barplot.html">theme_barplot</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="va">impact_palettes</span><span class="op">$</span><span class="va">impact_palette</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_impact.html">theme_impact</a></span><span class="op">(</span><span class="st">"impact"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="IMPACT_ggplot2_theme_files/figure-html/unnamed-chunk-6-1.png" alt="Initial plot without `theme_barplot` and `theme_impact` set with IMPACT theme" width="768"><p class="caption">
Initial plot without <code>theme_barplot</code> and
<code>theme_impact</code> set with IMPACT theme
</p>
</div>
<p>Some palettes are available in the <code>impact_palettes</code>
object.</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">impact_palettes</span></span>
<span><span class="co">#&gt; $reach_palette</span></span>
<span><span class="co">#&gt; [1] "#58585A" "#EE5859" "#D2CBB8" "#c7c8ca"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $impact_palette</span></span>
<span><span class="co">#&gt; [1] "#000000" "#315975" "#58585A"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $agora_palette</span></span>
<span><span class="co">#&gt; [1] "#581522" "#023C40" "#4F9C35" "#F56741" "#F6ECD0"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $tol_palette</span></span>
<span><span class="co">#&gt; [1] "#322288" "#505050" "#44AA99" "#88CCEE" "#DDCC77" "#EE5859" "#AA4499"</span></span>
<span><span class="co">#&gt; [8] "#721621"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $high_contrast_tol_palette</span></span>
<span><span class="co">#&gt; [1] "#275587" "#CEA936" "#A35464"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $wong_palette</span></span>
<span><span class="co">#&gt; [1] "#EE5859" "#E69F00" "#56B4E9" "#322288" "#F0E442" "#0072B2" "#505050"</span></span>
<span><span class="co">#&gt; [8] "#CC79A7"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $divergent</span></span>
<span><span class="co">#&gt; [1] "#F15B22" "#F58120" "#FBAB35" "#209EA0" "#008083" "#0072B2" "#016060"</span></span>
<span><span class="co">#&gt; </span></span>
<span><span class="co">#&gt; $divergent_with_neutral</span></span>
<span><span class="co">#&gt; [1] "#721621" "#D7191C" "#FDAE61" "#FFFFBF" "#97D3C3" "#209EA0" "#016060"</span></span></code></pre></div>
</div>
<div class="section level2">
<h2 id="errors-and-number-of-colors">Errors and number of colors<a class="anchor" aria-label="anchor" href="#errors-and-number-of-colors"></a>
</h2>
<p>The palette should have enough color to match the scale fill. The
impact palette only has 3 colors while the graph needs 4.</p>
<div class="sourceCode" id="cb8"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">data_to_plot</span> <span class="op">&lt;-</span> <span class="fu">presentresults</span><span class="fu">::</span><span class="va"><a href="../reference/presentresults_MSNA2024_labelled_results_table.html">presentresults_MSNA2024_labelled_results_table</a></span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span></span>
<span>    <span class="va">analysis_var</span> <span class="op">==</span> <span class="st">"snfi_fds_cannot_cat"</span>,</span>
<span>    <span class="va">group_var</span> <span class="op">==</span> <span class="st">"hoh_gender"</span><span class="op">)</span></span>
<span></span>
<span><span class="va">initialplot</span> <span class="op">&lt;-</span> <span class="va">data_to_plot</span> <span class="op"><a href="../reference/pipe.html">%&gt;%</a></span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_bar.html" class="external-link">geom_col</a></span><span class="op">(</span></span>
<span>    <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span></span>
<span>      x <span class="op">=</span> <span class="va">label_analysis_var_value</span>,</span>
<span>      y <span class="op">=</span> <span class="va">stat</span>,</span>
<span>      fill <span class="op">=</span> <span class="va">label_group_var_value</span></span>
<span>    <span class="op">)</span>,</span>
<span>    position <span class="op">=</span> <span class="st">"dodge"</span></span>
<span>  <span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/labs.html" class="external-link">labs</a></span><span class="op">(</span></span>
<span>    title <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data_to_plot</span><span class="op">$</span><span class="va">indicator</span><span class="op">)</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>    x <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data_to_plot</span><span class="op">$</span><span class="va">label_analysis_var</span><span class="op">)</span>, <span class="fl">50</span><span class="op">)</span>,</span>
<span>    fill <span class="op">=</span> <span class="fu">stringr</span><span class="fu">::</span><span class="fu"><a href="https://stringr.tidyverse.org/reference/str_wrap.html" class="external-link">str_wrap</a></span><span class="op">(</span><span class="fu"><a href="https://rdrr.io/r/base/unique.html" class="external-link">unique</a></span><span class="op">(</span><span class="va">data_to_plot</span><span class="op">$</span><span class="va">label_group_var</span><span class="op">)</span>, <span class="fl">20</span><span class="op">)</span></span>
<span>  <span class="op">)</span></span>
<span><span class="va">initialplot</span> <span class="op">+</span> </span>
<span>  <span class="fu"><a href="../reference/theme_barplot.html">theme_barplot</a></span><span class="op">(</span>palette <span class="op">=</span> <span class="va">impact_palettes</span><span class="op">$</span><span class="va">impact_palette</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu"><a href="../reference/theme_impact.html">theme_impact</a></span><span class="op">(</span><span class="st">"impact"</span><span class="op">)</span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00; font-weight: bold;">Error</span><span style="font-weight: bold;"> in `palette()`:</span></span></span>
<span><span class="co">#&gt; <span style="color: #BBBB00;">!</span> Insufficient values in manual scale. 4 needed but only 3 provided.</span></span></code></pre></div>
</div>
  </main><aside class="col-md-3"><nav id="toc" aria-label="Table of contents"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p>Developed by Mehedi Khan, Yann Say.</p>
</div>

<div class="pkgdown-footer-right">
  <p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

    </footer>
</div>





  </body>
</html>
